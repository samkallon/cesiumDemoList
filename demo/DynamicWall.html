<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="https://unpkg.com/vue@3"></script>
<link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
<script src="https://unpkg.com/element-plus"></script>

<link rel="stylesheet" href="/cesiumDemoList/cesium/Widgets/widgets.css">
<script src="/cesiumDemoList/cesium/Cesium.js"></script>

<script src="/cesiumDemoList/sam-czm-utils/index.js"></script>
<body>
<div id="app">
    <div class="container">
        <div id="cesiumContainer"></div>
        <div class="dig-terrian-container MaoBoLi">
            <div class="btn-groups">
                <el-button size="small" :type="curr == 1?'primary':''" @click="showWall(1,'shuiPing')">水平墙体1</el-button>
                <el-button size="small" :type="curr == 2?'primary':''" @click="showWall(2,'shuiPing','/cesiumDemoList/materialImg/dynamicWall.png')">水平墙体2</el-button>
                <el-button size="small" :type="curr == 3?'primary':''" @click="showWall(3,'chuiZhi')">垂直墙体1</el-button>
                <el-button size="small" :type="curr == 4?'primary':''" @click="showWall(4,'chuiZhi','/cesiumDemoList/materialImg/dynamicWall.png')">垂直墙体2</el-button>
            </div>
        </div>
    </div>
</div>


<script>
    const wallList = [[
        {
            "x": 1532691.0113004209,
            "y": -4465197.970253931,
            "z": 4274384.632662207
        },
        {
            "x": 1532746.191771099,
            "y": -4465198.01788432,
            "z": 4274364.919617005
        },
        {
            "x": 1532786.9859714806,
            "y": -4465066.866502248,
            "z": 4274486.459959381
        },
        {
            "x": 1532733.9624392178,
            "y": -4465065.997455441,
            "z": 4274506.267881826
        }
    ]]
    let viewer = null
    let samCzm = null
    const App = {
        data() {
            return {
                curr: 0,
            };
        },
        async mounted() {
            samCzm = new SamCesiumUtils.default.samCzm({Cesium:Cesium})
            samCzm.initViewer({id:'cesiumContainer'})
            viewer = samCzm.viewer
            viewer.scene.primitives.add(
                await Cesium.Cesium3DTileset.fromIonAssetId(354759),
            );

            samCzm.addWallGeojson({
                wallList,
                maximumHeights: 30,
                minimumHeights: 0,
                imgUrl: 'https://samkallon.top/cesiumDemoList/materialImg/GradientRed.png'
            })
            viewer.scene.camera.flyToBoundingSphere(samCzm.getBoundingSphereFromCartesian3List(wallList[0]),{
                offset: new Cesium.HeadingPitchRoll(0,Cesium.Math.toRadians(-30),0),
                duration:1
            })
        },
        methods:{
            showWall(id,type,imgUrl) {
                this.curr.value = id
                samCzm.removaEntitiesAndPrimitivesByName('DynamicWall')
                const params = {
                    wallList,
                    maximumHeights: 30,
                    minimumHeights: 0,
                    dynamicDir:type,
                    imgUrl:imgUrl || '/cesiumDemoList/materialImg/GradientRed.png'
                }
                if (id === 2){
                    params.repeat = new Cesium.Cartesian2(10,1)
                }
                samCzm.addWallGeojson(params)
            }
        }
    };
    const app = Vue.createApp(App);
    app.use(ElementPlus);
    app.mount("#app");

</script>
</body>
<style scoped>
    html, body {
        margin: 0;
        width: 100%;
        height: 100%;
    }

    .MaoBoLi {
        background-color: rgba(255, 255, 255, 0.37);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(5px);
    }

    .container {
        width: 100%;
        height: 100%;
        position: relative;
    }

    .dig-terrian-container {
        padding: 8px;
        position: absolute;
        top: 0;
        left: 0;
    }

    #cesiumContainer {
        width: 100%;
        height: 100%;
    }

    #app{
        width: 100%;
        height: 100%;
    }
</style>
</html>