var g;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(g||(g={}));function f(n){return typeof n=="number"}function u(n){return n==null}let C=Math.random;function d(){return v(C(),0,1-Number.EPSILON)}function v(n,e,t){return Math.min(Math.max(n,e),t)}function N(n){const e=L(n),t=0;let i=R(n);return e===i&&(i=t),d()*(e-i)+i}function h(n){return f(n)?n:N(n)}function R(n){return f(n)?n:n.min}function L(n){return f(n)?n:n.max}function a(n,e){if(n===e||e===void 0&&f(n))return n;const t=R(n),i=L(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:a(t,i)}function E(n){return n*Math.PI/180}var p;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})(p||(p={}));var r;(function(n){n.increasing="increasing",n.decreasing="decreasing"})(r||(r={}));var m;(function(n){n.none="none",n.max="max",n.min="min"})(m||(m={}));var x;(function(n){n.bottom="bottom",n.left="left",n.right="right",n.top="top"})(x||(x={}));var w;(function(n){n.precise="precise",n.percent="percent"})(w||(w={}));var k;(function(n){n.max="max",n.min="min",n.random="random"})(k||(k={}));function T(n,e,t,i,o){switch(e){case m.max:t>=o&&n.destroy();break;case m.min:t<=i&&n.destroy();break}}function U(n,e,t,i,o){if(n.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const y=(e.velocity??0)*o.factor,l=e.min,c=e.max,b=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=o.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case r.increasing:e.value>=c?(e.value-=c,e.loops||(e.loops=0),e.loops++):e.value+=y;break;case r.decreasing:e.value<=l?(e.value+=c,e.loops||(e.loops=0),e.loops++):e.value-=y}e.velocity&&b!==1&&(e.velocity*=b),T(n,i,e.value,l,c),n.destroyed||(e.value=v(e.value,l,c))}}class D{constructor(){this.value=0}load(e){u(e)||u(e.value)||(this.value=a(e.value))}}var s;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(s||(s={}));class O{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){u(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=a(e.speed)),e.decay!==void 0&&(this.decay=a(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class A extends D{constructor(){super(),this.animation=new O,this.direction=s.clockwise,this.path=!1,this.value=0}load(e){u(e)||(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const I=2,F=Math.PI*I,W=1,_=360;class j{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:E(h(t.value)),min:0,max:F},e.pathRotation=t.path;let i=t.direction;switch(i===s.random&&(i=Math.floor(d()*I)>0?s.counterClockwise:s.clockwise),i){case s.counterClockwise:case"counterClockwise":e.rotate.status=r.decreasing;break;case s.clockwise:e.rotate.status=r.increasing;break}const o=t.animation;o.enable&&(e.rotate.decay=W-h(o.decay),e.rotate.velocity=h(o.speed)/_*this.container.retina.reduceFactor,o.sync||(e.rotate.velocity*=d())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path):!1}loadOptions(e,...t){e.rotate||(e.rotate=new A);for(const i of t)e.rotate.load(i==null?void 0:i.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(U(e,e.rotate,!1,m.none,t),e.rotation=e.rotate.value))}}async function G(n,e=!0){n.checkVersion("3.8.1"),await n.addParticleUpdater("rotate",t=>Promise.resolve(new j(t)),e)}export{G as loadRotateUpdater};
