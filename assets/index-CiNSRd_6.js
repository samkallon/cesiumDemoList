const V="pointermove",j="tsParticles - Error";var L;(function(e){e.bottom="bottom",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.left="left",e.none="none",e.right="right",e.top="top",e.topLeft="top-left",e.topRight="top-right",e.outside="outside",e.inside="inside"})(L||(L={}));function S(e){return typeof e=="number"}function R(e){return Array.isArray(e)}function C(e){return e==null}const l={x:0,y:0,z:0},O=2,_=1;class h{constructor(t,i,o){if(this._updateFromAngle=(n,s)=>{this.x=Math.cos(n)*s,this.y=Math.sin(n)*s},!S(t)&&t){this.x=t.x,this.y=t.y;const n=t;this.z=n.z?n.z:l.z}else if(t!==void 0&&i!==void 0)this.x=t,this.y=i,this.z=o??l.z;else throw new Error(`${j} Vector3d not initialized correctly`)}static get origin(){return h.create(l.x,l.y,l.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return h.create(t.x,t.y,t.z)}static create(t,i,o){return new h(t,i,o)}add(t){return h.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return h.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return h.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**O+this.y**O}mult(t){return h.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(_/t)}rotate(t){return h.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),l.z)}setTo(t){this.x=t.x,this.y=t.y;const i=t;this.z=i.z?i.z:l.z}sub(t){return h.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class d extends h{constructor(t,i){super(t,i,l.z)}static get origin(){return d.create(l.x,l.y)}static clone(t){return d.create(t.x,t.y)}static create(t,i){return new d(t,i)}}let tt=Math.random;function et(){return it(tt(),0,1-Number.EPSILON)}function it(e,t,i){return Math.min(Math.max(e,t),i)}function nt(e){const t=st(e),i=0;let o=ot(e);return t===o&&(o=i),et()*(t-o)+o}function z(e){return S(e)?e:nt(e)}function ot(e){return S(e)?e:e.min}function st(e){return S(e)?e:e.max}function J(e,t){const i=e.x-t.x,o=e.y-t.y,n=2;return{dx:i,dy:o,distance:Math.sqrt(i**n+o**n)}}function rt(e,t){return J(e,t).distance}function T(e,t,i,o){return d.create(e.x*(i-o)/(i+o)+t.x*2*o/(i+o),e.y)}var B;(function(e){e.auto="auto",e.increase="increase",e.decrease="decrease",e.random="random"})(B||(B={}));var H;(function(e){e.increasing="increasing",e.decreasing="decreasing"})(H||(H={}));var A;(function(e){e.none="none",e.max="max",e.min="min"})(A||(A={}));var N;(function(e){e.bottom="bottom",e.left="left",e.right="right",e.top="top"})(N||(N={}));var $;(function(e){e.precise="precise",e.percent="percent"})($||($={}));var D;(function(e){e.max="max",e.min="min",e.random="random"})(D||(D={}));function W(e){const t={bounced:!1},{pSide:i,pOtherSide:o,rectSide:n,rectOtherSide:s,velocity:r,factor:c}=e,a=.5,u=0;return o.min<s.min||o.min>s.max||o.max<s.min||o.max>s.max||(i.max>=n.min&&i.max<=(n.max+n.min)*a&&r>u||i.min<=n.max&&i.min>(n.max+n.min)*a&&r<u)&&(t.velocity=r*-c,t.bounced=!0),t}function w(e,t){return e===t||R(t)&&t.indexOf(e)>-1}function K(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function ct(e,t){return!!dt(t,i=>i.enable&&w(e,i.mode))}function at(e,t,i){Q(t,o=>{const n=o.mode;o.enable&&w(e,n)&&ut(o,i)})}function ut(e,t){const i=e.selectors;Q(i,o=>{t(o,e)})}function ht(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:d.create(z(e.options.bounce.horizontal.value),z(e.options.bounce.vertical.value))}}function lt(e,t){const{x:i,y:o}=e.velocity.sub(t.velocity),[n,s]=[e.position,t.position],{dx:r,dy:c}=J(s,n);if(i*r+o*c<0)return;const u=-Math.atan2(c,r),f=e.mass,p=t.mass,q=e.velocity.rotate(u),I=t.velocity.rotate(u),Z=T(q,I,f,p),k=T(I,q,f,p),P=Z.rotate(-u),F=k.rotate(-u);e.velocity.x=P.x*e.factor.x,e.velocity.y=P.y*e.factor.y,t.velocity.x=F.x*t.factor.x,t.velocity.y=F.y*t.factor.y}function ft(e,t){const i=e.getPosition(),o=e.getRadius(),n=K(i,o),s=e.options.bounce,r=W({pSide:{min:n.left,max:n.right},pOtherSide:{min:n.top,max:n.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:z(s.horizontal.value)});r.bounced&&(r.velocity!==void 0&&(e.velocity.x=r.velocity),r.position!==void 0&&(e.position.x=r.position));const c=W({pSide:{min:n.top,max:n.bottom},pOtherSide:{min:n.left,max:n.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:z(s.vertical.value)});c.bounced&&(c.velocity!==void 0&&(e.velocity.y=c.velocity),c.position!==void 0&&(e.position.y=c.position))}function Q(e,t){return R(e)?e.map((o,n)=>t(o,n)):t(e,0)}function dt(e,t){return R(e)?e.find((o,n)=>t(o,n)):t(e,0)?e:void 0}function xt(e,t){if(e.version!==t)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${e.version}. Plugins version: ${t}`)}var E;(function(e){e.circle="circle",e.rectangle="rectangle"})(E||(E={}));var M;(function(e){e.external="external",e.particles="particles"})(M||(M={}));var x;(function(e){e.circle="circle",e.rectangle="rectangle"})(x||(x={}));const y=2;class U{constructor(t,i,o){this.position={x:t,y:i},this.type=o}}class m extends U{constructor(t,i,o){super(t,i,x.circle),this.radius=o}contains(t){return rt(t,this.position)<=this.radius}intersects(t){const i=this.position,o=t.position,n={x:Math.abs(o.x-i.x),y:Math.abs(o.y-i.y)},s=this.radius;if(t instanceof m||t.type===x.circle){const r=t,c=s+r.radius,a=Math.sqrt(n.x**y+n.y**y);return c>a}else if(t instanceof g||t.type===x.rectangle){const r=t,{width:c,height:a}=r.size;return Math.pow(n.x-c,y)+Math.pow(n.y-a,y)<=s**y||n.x<=s+c&&n.y<=s+a||n.x<=c||n.y<=a}return!1}}class g extends U{constructor(t,i,o,n){super(t,i,x.rectangle),this.size={height:n,width:o}}contains(t){const i=this.size.width,o=this.size.height,n=this.position;return t.x>=n.x&&t.x<=n.x+i&&t.y>=n.y&&t.y<=n.y+o}intersects(t){if(t instanceof m)return t.intersects(this);const i=this.size.width,o=this.size.height,n=this.position,s=t.position,r=t instanceof g?t.size:{width:0,height:0},c=r.width,a=r.height;return s.x<n.x+i&&s.x+c>n.x&&s.y<n.y+o&&s.y+a>n.y}}class mt{constructor(t){this.type=M.external,this.container=t}}const yt=2,b=.5,gt=Math.PI*b,G=2,X=10,pt=0;function Y(e,t,i,o,n){const s=e.particles.quadTree.query(o,n);for(const r of s)o instanceof m?lt(ht(r),{position:t,radius:i,mass:i**yt*gt,velocity:d.origin,factor:d.origin}):o instanceof g&&ft(r,K(t,i))}function vt(e,t,i,o){const n=document.querySelectorAll(t);n.length&&n.forEach(s=>{const r=s,c=e.retina.pixelRatio,a={x:(r.offsetLeft+r.offsetWidth*b)*c,y:(r.offsetTop+r.offsetHeight*b)*c},u=r.offsetWidth*b*c,f=X*c,p=i.type===E.circle?new m(a.x,a.y,u+f):new g(r.offsetLeft*c-f,r.offsetTop*c-f,r.offsetWidth*c+f*G,r.offsetHeight*c+f*G);o(a,u,p)})}function bt(e,t,i,o){at(i,t,(n,s)=>vt(e,n,s,(r,c,a)=>Y(e,r,c,a,o)))}function zt(e,t){const i=e.retina.pixelRatio,o=X*i,n=e.interactivity.mouse.position,s=e.retina.bounceModeDistance;!s||s<pt||!n||Y(e,n,s,new m(n.x,n.y,s+o),t)}class wt{constructor(){this.distance=200}load(t){C(t)||t.distance!==void 0&&(this.distance=t.distance)}}const v="bounce";class St extends mt{constructor(t){super(t)}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.bounce;i&&(t.retina.bounceModeDistance=i.distance*t.retina.pixelRatio)}interact(){const t=this.container,i=t.actualOptions,o=i.interactivity.events,n=t.interactivity.status===V,s=o.onHover.enable,r=o.onHover.mode,c=o.onDiv;n&&s&&w(v,r)?zt(this.container,a=>this.isEnabled(a)):bt(this.container,c,v,a=>this.isEnabled(a))}isEnabled(t){const i=this.container,o=i.actualOptions,n=i.interactivity.mouse,s=((t==null?void 0:t.interactivity)??o.interactivity).events,r=s.onDiv;return!!n.position&&s.onHover.enable&&w(v,s.onHover.mode)||ct(v,r)}loadModeOptions(t,...i){t.bounce||(t.bounce=new wt);for(const o of i)t.bounce.load(o==null?void 0:o.bounce)}reset(){}}async function Et(e,t=!0){xt(e,"3.7.1"),await e.addInteractor("externalBounce",i=>Promise.resolve(new St(i)),t)}export{wt as Bounce,Et as loadExternalBounceInteraction};
