var h;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(h||(h={}));function a(n){return typeof n=="number"}function f(n){return n==null}let V=Math.random;function m(){return F(V(),0,1-Number.EPSILON)}function F(n,e,t){return Math.min(Math.max(n,e),t)}function c(n){const e=L(n),t=0;let i=T(n);return e===i&&(i=t),m()*(e-i)+i}function r(n){return a(n)?n:c(n)}function T(n){return a(n)?n:n.min}function L(n){return a(n)?n:n.max}function d(n,e){if(n===e||e===void 0&&a(n))return n;const t=T(n),i=L(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:d(t,i)}var y;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})(y||(y={}));var g;(function(n){n.max="max",n.min="min",n.random="random"})(g||(g={}));class p{constructor(){this.value=0}load(e){f(e)||f(e.value)||(this.value=d(e.value))}}class N extends p{constructor(){super(),this.sync=!1}load(e){f(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class E extends p{constructor(){super(),this.sync=!1}load(e){f(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class P{constructor(){this.count=0,this.delay=new N,this.duration=new E}load(e){f(e)||(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const u=0,U=-1,x=0,w=0;function I(n,e,t){if(!n.life)return;const i=n.life;let o=!1;if(n.spawning)if(i.delayTime+=e.value,i.delayTime>=n.life.delay)o=!0,n.spawning=!1,i.delayTime=u,i.time=u;else return;if(i.duration===U||n.spawning||(o?i.time=u:i.time+=e.value,i.time<i.duration))return;if(i.time=u,n.life.count>x&&n.life.count--,n.life.count===x){n.destroy();return}const O=d(w,t.width),S=d(w,t.width);n.position.x=c(O),n.position.y=c(S),n.spawning=!0,i.delayTime=u,i.time=u,n.reset();const l=n.options.life;l&&(i.delay=r(l.delay.value)*1e3,i.duration=r(l.duration.value)*1e3)}const s=0,b=1,R=-1;class ${constructor(e){this.container=e}init(e){const t=this.container,i=e.options,o=i.life;o&&(e.life={delay:t.retina.reduceFactor?r(o.delay.value)*(o.delay.sync?b:m())/t.retina.reduceFactor*1e3:s,delayTime:s,duration:t.retina.reduceFactor?r(o.duration.value)*(o.duration.sync?b:m())/t.retina.reduceFactor*1e3:s,time:s,count:o.count},e.life.duration<=s&&(e.life.duration=R),e.life.count<=s&&(e.life.count=R),e.life&&(e.spawning=e.life.delay>s))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new P);for(const i of t)e.life.load(i==null?void 0:i.life)}update(e,t){!this.isEnabled(e)||!e.life||I(e,t,this.container.canvas.size)}}async function j(n,e=!0){n.checkVersion("3.8.1"),await n.addParticleUpdater("life",async t=>Promise.resolve(new $(t)),e)}export{j as loadLifeUpdater};
