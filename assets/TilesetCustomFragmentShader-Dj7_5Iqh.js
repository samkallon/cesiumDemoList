import{S as l}from"./index-DqJpl1j7.js";import{_ as c,o as u,c as d,a as f,b as p}from"./index-Cz_mX-Ds.js";const g={class:"container"},C={__name:"TilesetCustomFragmentShader",setup(h){let e,a,s,o=null;return u(async()=>{o=new l.samCzm({Cesium}),o.initViewer({id:"cesiumContainer"}),e=o.viewer,e.scene.debugShowFramesPerSecond=!0,e.imageryLayers.removeAll();const n=e.imageryLayers.addImageryProvider(await Cesium.IonImageryProvider.fromAssetId(2,{mapStyle:"CANVAS_DARK"}));n.brightness=.3,e.scene.highDynamicRange=!0,e.scene.postProcessStages.bloom.enabled=!0,e.scene.postProcessStages.bloom.uniforms.contrast=255,e.scene.postProcessStages.bloom.uniforms.brightness=.05,e.scene.postProcessStages.bloom.uniforms.glowOnly=!1,e.scene.postProcessStages.bloom.uniforms.delta=1.1,e.scene.postProcessStages.bloom.uniforms.sigma=5,e.scene.postProcessStages.bloom.uniforms.stepSize=.6,e.scene.postProcessStages.bloom.uniforms.isSelected=!1,e.scene.postProcessStages.bloom.uniforms.selectedBloom=10,e.scene.postProcessStages.bloom.uniforms.bloomColor=Cesium.Color.fromCssColorString("#fafafa"),e.scene.sun.show=!1,e.scene.moon.show=!1,e.scene.undergroundMode=!1,e.scene.terrainProvider.isCreateSkirt=!1,e.scene.skyAtmosphere.show=!1,e.scene.globe.showGroundAtmosphere=!1,e.scene.globe.enableLighting=!1,e.scene.fog.enabled=!1,a=e.scene.primitives.add(await Cesium.Cesium3DTileset.fromIonAssetId(2539811,{})),s=e.scene.primitives.add(await Cesium.Cesium3DTileset.fromIonAssetId(2539811,{debugWireframe:!0,enableDebugWireframe:!0})),e.camera.setView({destination:{x:-2.1964140305486363e6,y:5180162321807583e-9,z:2994845400507529e-9},orientation:new Cesium.HeadingPitchRoll(.005264386980204705,-.39973636811014357,2282976960188421e-20)});const t=[{position:Cesium.Cartesian3.fromDegrees(112.9757086853262,28.20774389962781,200),color:"#f51e1e",radius:900},{position:Cesium.Cartesian3.fromDegrees(112.97679049739413,28.194543502196602,200),color:"#40fe01",radius:900}];a.customShader=o.getTilesetDynamicShader("#0572cb",t),t.forEach(i=>{e.entities.add({position:i.position,point:{pixelSize:20,color:Cesium.Color.fromCssColorString(i.color)}})}),s.customShader=new Cesium.CustomShader({mode:Cesium.CustomShaderMode.REPLACE_MATERIAL,lightingModel:Cesium.LightingModel.UNLIT,uniforms:{u_lerp:{type:Cesium.UniformType.FLOAT,value:0},u_color:{type:Cesium.UniformType.VEC4,value:Cesium.Color.fromCssColorString("#bedcfd")}},fragmentShaderText:`
                void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
                    vec3 positionMC = fsInput.attributes.positionMC;
                    vec3 positionEC = fsInput.attributes.positionEC;
                    if(u_lerp <positionEC.x && positionEC.x < u_lerp + 350.) {
                        material.diffuse = u_color.rgb;
                        material.alpha = 1.;
                    }else {
                        discard;
                    }
                }
                `});let r=20;e.scene.postUpdate.addEventListener((i,S)=>{s.customShader.uniforms.u_lerp.value<-5e3?r=20:s.customShader.uniforms.u_lerp.value>5e3&&(r=-20),s.customShader.uniforms.u_lerp.value+=r});const m=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(112.97553151279656,28.20185937507269));e.scene.camera.lookAtTransform(m,new Cesium.HeadingPitchRange(0,-Math.PI/8,2900)),e.clock.onTick.addEventListener(i=>{e.scene.camera.rotateRight(.003)}),o.addDynamicRoadByGeojsonUrl("/cesiumDemoList/geojson/changShaRoad.json")}),(n,t)=>(p(),d("div",g,t[0]||(t[0]=[f("div",{id:"cesiumContainer"},null,-1)])))}},v=c(C,[["__scopeId","data-v-3d4d9b70"]]);export{v as default};
