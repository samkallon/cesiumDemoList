const H="pointermove",N="tsParticles - Error";var w;(function(e){e.bottom="bottom",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.left="left",e.none="none",e.right="right",e.top="top",e.topLeft="top-left",e.topRight="top-right",e.outside="outside",e.inside="inside"})(w||(w={}));function j(e){return typeof e=="number"}function G(e){return Array.isArray(e)}function J(e){return e==null}const h={x:0,y:0,z:0},k=2,K=1;class u{constructor(t,i,n){if(this._updateFromAngle=(s,a)=>{this.x=Math.cos(s)*a,this.y=Math.sin(s)*a},!j(t)&&t){this.x=t.x,this.y=t.y;const s=t;this.z=s.z?s.z:h.z}else if(t!==void 0&&i!==void 0)this.x=t,this.y=i,this.z=n??h.z;else throw new Error(`${N} Vector3d not initialized correctly`)}static get origin(){return u.create(h.x,h.y,h.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return u.create(t.x,t.y,t.z)}static create(t,i,n){return new u(t,i,n)}add(t){return u.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return u.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return u.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**k+this.y**k}mult(t){return u.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=0&&this.multTo(K/t)}rotate(t){return u.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),h.z)}setTo(t){this.x=t.x,this.y=t.y;const i=t;this.z=i.z?i.z:h.z}sub(t){return u.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class p extends u{constructor(t,i){super(t,i,h.z)}static get origin(){return p.create(h.x,h.y)}static clone(t){return p.create(t.x,t.y)}static create(t,i){return new p(t,i)}}function U(e,t,i){return Math.min(Math.max(e,t),i)}function Q(e,t){const i=e.x-t.x,n=e.y-t.y,s=2;return{dx:i,dy:n,distance:Math.sqrt(i**s+n**s)}}function W(e,t){return Q(e,t).distance}var O;(function(e){e.auto="auto",e.increase="increase",e.decrease="decrease",e.random="random"})(O||(O={}));var M;(function(e){e.increasing="increasing",e.decreasing="decreasing"})(M||(M={}));var S;(function(e){e.none="none",e.max="max",e.min="min"})(S||(S={}));var A;(function(e){e.bottom="bottom",e.left="left",e.right="right",e.top="top"})(A||(A={}));var L;(function(e){e.precise="precise",e.percent="percent"})(L||(L={}));var P;(function(e){e.max="max",e.min="min",e.random="random"})(P||(P={}));function z(e,t){return e===t||G(t)&&t.indexOf(e)>-1}function X(e,t){if(e.version!==t)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${e.version}. Plugins version: ${t}`)}var v;(function(e){e.external="external",e.particles="particles"})(v||(v={}));var d;(function(e){e.circle="circle",e.rectangle="rectangle"})(d||(d={}));const x=2;class R{constructor(t,i,n){this.position={x:t,y:i},this.type=n}}class y extends R{constructor(t,i,n){super(t,i,d.circle),this.radius=n}contains(t){return W(t,this.position)<=this.radius}intersects(t){const i=this.position,n=t.position,s={x:Math.abs(n.x-i.x),y:Math.abs(n.y-i.y)},a=this.radius;if(t instanceof y||t.type===d.circle){const r=t,c=a+r.radius,o=Math.sqrt(s.x**x+s.y**x);return c>o}else if(t instanceof I||t.type===d.rectangle){const r=t,{width:c,height:o}=r.size;return Math.pow(s.x-c,x)+Math.pow(s.y-o,x)<=a**x||s.x<=a+c&&s.y<=a+o||s.x<=c||s.y<=o}return!1}}class I extends R{constructor(t,i,n,s){super(t,i,d.rectangle),this.size={height:s,width:n}}contains(t){const i=this.size.width,n=this.size.height,s=this.position;return t.x>=s.x&&t.x<=s.x+i&&t.y>=s.y&&t.y<=s.y+n}intersects(t){if(t instanceof y)return t.intersects(this);const i=this.size.width,n=this.size.height,s=this.position,a=t.position,r=t instanceof I?t.size:{width:0,height:0},c=r.width,o=r.height;return a.x<s.x+i&&a.x+c>s.x&&a.y<s.y+n&&a.y+o>s.y}}class Y{constructor(t){this.type=v.external,this.container=t}}var g;(function(e){e.easeInBack="ease-in-back",e.easeInCirc="ease-in-circ",e.easeInCubic="ease-in-cubic",e.easeInLinear="ease-in-linear",e.easeInQuad="ease-in-quad",e.easeInQuart="ease-in-quart",e.easeInQuint="ease-in-quint",e.easeInExpo="ease-in-expo",e.easeInSine="ease-in-sine",e.easeOutBack="ease-out-back",e.easeOutCirc="ease-out-circ",e.easeOutCubic="ease-out-cubic",e.easeOutLinear="ease-out-linear",e.easeOutQuad="ease-out-quad",e.easeOutQuart="ease-out-quart",e.easeOutQuint="ease-out-quint",e.easeOutExpo="ease-out-expo",e.easeOutSine="ease-out-sine",e.easeInOutBack="ease-in-out-back",e.easeInOutCirc="ease-in-out-circ",e.easeInOutCubic="ease-in-out-cubic",e.easeInOutLinear="ease-in-out-linear",e.easeInOutQuad="ease-in-out-quad",e.easeInOutQuart="ease-in-out-quart",e.easeInOutQuint="ease-in-out-quint",e.easeInOutExpo="ease-in-out-expo",e.easeInOutSine="ease-in-out-sine"})(g||(g={}));const Z=1,E=1,F=0;function B(e,t,i,n,s,a){const r=t.actualOptions.interactivity.modes.attract;if(!r)return;const c=t.particles.quadTree.query(s,a);for(const o of c){const{dx:l,dy:C,distance:f}=Q(o.position,i),b=r.speed*r.factor,q=U(e.getEasing(r.easing)(E-f/n)*b,Z,r.maxSpeed),$=p.create(f?l/f*q:b,f?C/f*q:b);o.position.subFrom($)}}function D(e,t,i){t.attract||(t.attract={particles:[]});const{attract:n}=t;if(n.finish||(n.count||(n.count=0),n.count++,n.count===t.particles.count&&(n.finish=!0)),n.clicking){const s=t.interactivity.mouse.clickPosition,a=t.retina.attractModeDistance;if(!a||a<F||!s)return;B(e,t,s,a,new y(s.x,s.y,a),r=>i(r))}else n.clicking===!1&&(n.particles=[])}function V(e,t,i){const n=t.interactivity.mouse.position,s=t.retina.attractModeDistance;!s||s<F||!n||B(e,t,n,s,new y(n.x,n.y,s),a=>i(a))}class _{constructor(){this.distance=200,this.duration=.4,this.easing=g.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(t){J(t)||(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}const m="attract";class T extends Y{constructor(t,i){super(i),this._engine=t,i.attract||(i.attract={particles:[]}),this.handleClickMode=n=>{const s=this.container.actualOptions,a=s.interactivity.modes.attract;if(!(!a||n!==m)){i.attract||(i.attract={particles:[]}),i.attract.clicking=!0,i.attract.count=0;for(const r of i.attract.particles)this.isEnabled(r)&&r.velocity.setTo(r.initialVelocity);i.attract.particles=[],i.attract.finish=!1,setTimeout(()=>{i.destroyed||(i.attract||(i.attract={particles:[]}),i.attract.clicking=!1)},a.duration*1e3)}}}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.attract;i&&(t.retina.attractModeDistance=i.distance*t.retina.pixelRatio)}interact(){const t=this.container,i=t.actualOptions,n=t.interactivity.status===H,s=i.interactivity.events,{enable:a,mode:r}=s.onHover,{enable:c,mode:o}=s.onClick;n&&a&&z(m,r)?V(this._engine,this.container,l=>this.isEnabled(l)):c&&z(m,o)&&D(this._engine,this.container,l=>this.isEnabled(l))}isEnabled(t){const i=this.container,n=i.actualOptions,s=i.interactivity.mouse,a=((t==null?void 0:t.interactivity)??n.interactivity).events;if((!s.position||!a.onHover.enable)&&(!s.clickPosition||!a.onClick.enable))return!1;const r=a.onHover.mode,c=a.onClick.mode;return z(m,r)||z(m,c)}loadModeOptions(t,...i){t.attract||(t.attract=new _);for(const n of i)t.attract.load(n==null?void 0:n.attract)}reset(){}}async function tt(e,t=!0){X(e,"3.7.1"),await e.addInteractor("externalAttract",i=>Promise.resolve(new T(e,i)),t)}export{_ as Attract,tt as loadExternalAttractInteraction};
