const nn="pointermove";var S;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(S||(S={}));function b(n){return typeof n=="string"}function N(n){return typeof n=="number"}function L(n){return Array.isArray(n)}function R(n){return n==null}let tn=Math.random;function A(){return en(tn(),0,1-Number.EPSILON)}function en(n,t,e){return Math.min(Math.max(n,t),e)}function P(n){const t=j(n),e=0;let r=_(n);return t===r&&(r=e),A()*(t-r)+r}function _(n){return N(n)?n:n.min}function j(n){return N(n)?n:n.max}function p(n,t){if(n===t||t===void 0&&N(n))return n;const e=_(n),r=j(n);return t!==void 0?{min:Math.min(e,t),max:Math.max(r,t)}:p(e,r)}function rn(n,t){const e=n.x-t.x,r=n.y-t.y,i=2;return{dx:e,dy:r,distance:Math.sqrt(e**i+r**i)}}function on(n,t){return rn(n,t).distance}var $;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})($||($={}));var q;(function(n){n.increasing="increasing",n.decreasing="decreasing"})(q||(q={}));var z;(function(n){n.none="none",n.max="max",n.min="min"})(z||(z={}));var F;(function(n){n.bottom="bottom",n.left="left",n.right="right",n.top="top"})(F||(F={}));var V;(function(n){n.precise="precise",n.percent="percent"})(V||(V={}));var W;(function(n){n.max="max",n.min="min",n.random="random"})(W||(W={}));function an(n,t){return n===t||L(t)&&t.indexOf(n)>-1}function sn(n){return Math.floor(A()*n.length)}function B(n,t,e=!0){return n[sn(n)]}function cn(n,t){if(n.version!==t)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${n.version}. Plugins version: ${t}`)}var H;(function(n){n.darken="darken",n.enlighten="enlighten"})(H||(H={}));const C="random",k="mid";function ln(n,t){if(t){for(const e of n.colorManagers.values())if(t.startsWith(e.stringPrefix))return e.parseString(t)}}function E(n,t,e,r=!0){if(!t)return;const i=b(t)?{value:t}:t;if(b(i.value))return J(n,i.value,e,r);if(L(i.value))return E(n,{value:B(i.value,e,r)});for(const o of n.colorManagers.values()){const a=o.handleRangeColor(i);if(a)return a}}function J(n,t,e,r=!0){if(!t)return;const i=b(t)?{value:t}:t;if(b(i.value))return i.value===C?K():un(n,i.value);if(L(i.value))return J(n,{value:B(i.value,e,r)});for(const o of n.colorManagers.values()){const a=o.handleColor(i);if(a)return a}}function un(n,t){return ln(n,t)}function fn(n){const a=(n.h%360+360)%360,x=Math.max(0,Math.min(100,n.s)),f=Math.max(0,Math.min(100,n.l)),M=a/360,m=x/100,c=f/100,s=255,g=3;if(x===0){const l=Math.round(c*s);return{r:l,g:l,b:l}}const v=.5,d=2,h=(l,w,u)=>{if(u<0&&u++,u>1&&u--,u*6<1)return l+(w-l)*6*u;if(u*d<1)return w;if(u*g<1*d){const D=d/g;return l+(w-l)*(D-u)*6}return l},Q=1,y=c<v?c*(Q+m):c+m-c*m,O=d*c-y,U=1,G=U/g,X=Math.min(s,s*h(O,y,M+G)),Y=Math.min(s,s*h(O,y,M)),Z=Math.min(s,s*h(O,y,M-G));return{r:Math.round(X),g:Math.round(Y),b:Math.round(Z)}}function K(n){return{b:Math.floor(P(p(0,256))),g:Math.floor(P(p(0,256))),r:Math.floor(P(p(0,256)))}}function dn(n,t){return`rgba(${n.r}, ${n.g}, ${n.b}, ${t??1})`}function mn(n,t,e){if(e===C)return K();if(e===k){const r=n.getFillColor()??n.getStrokeColor(),i=t==null?void 0:t.getStrokeColor();{const o=r??i;if(o)return fn(o)}}else return e}function gn(n,t,e,r){const i=b(t)?t:t.value;return i===C?r?E(n,{value:i}):e?C:k:i===k?k:E(n,{value:i})}function hn(n,t,e){n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.closePath()}class T{constructor(){this.value=""}static create(t,e){const r=new T;return r.load(t),e!==void 0&&(b(e)||L(e)?r.load({value:e}):r.load(e)),r}load(t){R(t)||R(t.value)||(this.value=t.value)}}var I;(function(n){n.external="external",n.particles="particles"})(I||(I={}));class bn{constructor(t){this.type=I.external,this.container=t}}class xn{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(t){R(t)||(t.blink!==void 0&&(this.blink=t.blink),t.color!==void 0&&(this.color=T.create(this.color,t.color)),t.consent!==void 0&&(this.consent=t.consent),t.opacity!==void 0&&(this.opacity=t.opacity))}}class Mn{constructor(){this.distance=100,this.links=new xn}load(t){R(t)||(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links))}}const vn=0;function yn(n,t,e,r,i,o){hn(n,e,r),n.strokeStyle=dn(i,o),n.lineWidth=t,n.stroke()}function pn(n,t,e,r,i){n.canvas.draw(o=>{const a=t.getPosition();yn(o,t.retina.linksWidth??vn,a,i,e,r)})}const kn="grab",Rn=0,Cn=0;class Ln extends bn{constructor(t,e){super(t),this._engine=e}clear(){}init(){const t=this.container,e=t.actualOptions.interactivity.modes.grab;e&&(t.retina.grabModeDistance=e.distance*t.retina.pixelRatio)}interact(){var x;const t=this.container,e=t.actualOptions,r=e.interactivity;if(!r.modes.grab||!r.events.onHover.enable||t.interactivity.status!==nn)return;const i=t.interactivity.mouse.position;if(!i)return;const o=t.retina.grabModeDistance;if(!o||o<Rn)return;const a=t.particles.quadTree.queryCircle(i,o,f=>this.isEnabled(f));for(const f of a){const M=f.getPosition(),m=on(M,i);if(m>o)continue;const c=r.modes.grab.links,s=c.opacity,g=s-m*s/o;if(g<=Cn)continue;const v=c.color??((x=f.options.links)==null?void 0:x.color);if(!t.particles.grabLineColor&&v){const h=r.modes.grab.links;t.particles.grabLineColor=gn(this._engine,v,h.blink,h.consent)}const d=mn(f,void 0,t.particles.grabLineColor);d&&pn(t,f,d,g,i)}}isEnabled(t){const e=this.container,r=e.interactivity.mouse,i=((t==null?void 0:t.interactivity)??e.actualOptions.interactivity).events;return i.onHover.enable&&!!r.position&&an(kn,i.onHover.mode)}loadModeOptions(t,...e){t.grab||(t.grab=new Mn);for(const r of e)t.grab.load(r==null?void 0:r.grab)}reset(){}}async function En(n,t=!0){cn(n,"3.7.1"),await n.addInteractor("externalGrab",e=>Promise.resolve(new Ln(e,n)),t)}export{Mn as Grab,xn as GrabLinks,En as loadExternalGrabInteraction};
