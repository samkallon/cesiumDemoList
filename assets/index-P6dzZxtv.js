var p;(function(t){t.bottom="bottom",t.bottomLeft="bottom-left",t.bottomRight="bottom-right",t.left="left",t.none="none",t.right="right",t.top="top",t.topLeft="top-left",t.topRight="top-right",t.outside="outside",t.inside="inside"})(p||(p={}));function I(t){return Array.isArray(t)}function w(t){return t==null}function E(t,n,e){return Math.min(Math.max(t,n),e)}function b(t,n,e,i){return Math.floor((t*e+n*i)/(e+i))}var y;(function(t){t.auto="auto",t.increase="increase",t.decrease="decrease",t.random="random"})(y||(y={}));var v;(function(t){t.increasing="increasing",t.decreasing="decreasing"})(v||(v={}));var C;(function(t){t.none="none",t.max="max",t.min="min"})(C||(C={}));var O;(function(t){t.bottom="bottom",t.left="left",t.right="right",t.top="top"})(O||(O={}));var R;(function(t){t.precise="precise",t.percent="percent"})(R||(R={}));var k;(function(t){t.max="max",t.min="min",t.random="random"})(k||(k={}));function H(t,n){return t===n||I(n)&&n.indexOf(t)>-1}var F;(function(t){t.darken="darken",t.enlighten="enlighten"})(F||(F={}));function P(t){const n=(t.h%360+360)%360,e=Math.max(0,Math.min(100,t.s)),i=Math.max(0,Math.min(100,t.l)),o=n/360,r=e/100,a=i/100;if(e===0){const c=Math.round(a*255);return{r:c,g:c,b:c}}const d=(c,h,u)=>(u<0&&u++,u>1&&u--,u*6<1?c+(h-c)*6*u:u*2<1?h:u*3<1*2?c+(h-c)*(.6666666666666666-u)*6:c),s=a<.5?a*(1+r):a+r-a*r,f=2*a-s,l=1/3,x=Math.min(255,255*d(f,s,o+l)),g=Math.min(255,255*d(f,s,o)),m=Math.min(255,255*d(f,s,o-l));return{r:Math.round(x),g:Math.round(g),b:Math.round(m)}}function q(t,n){return`rgba(${t.r}, ${t.g}, ${t.b}, ${n??1})`}function N(t,n){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${n??1})`}function T(t,n,e,i){let o=t,r=n;return o.r===void 0&&(o=P(t)),r.r===void 0&&(r=P(n)),{b:b(o.b,r.b,e,i),g:b(o.g,r.g,e,i),r:b(o.r,r.r,e,i)}}function W(t,n,e){t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(e.x,e.y),t.closePath()}var M;(function(t){t.external="external",t.particles="particles"})(M||(M={}));class A{constructor(n){this.type=M.external,this.container=n}}class z{constructor(){this.opacity=.5}load(n){w(n)||n.opacity!==void 0&&(this.opacity=n.opacity)}}class B{constructor(){this.distance=80,this.links=new z,this.radius=60}load(n){w(n)||(n.distance!==void 0&&(this.distance=n.distance),this.links.load(n.links),n.radius!==void 0&&(this.radius=n.radius))}}const $=0,L=1,G=0;function V(t,n,e,i){const o=Math.floor(e.getRadius()/n.getRadius()),r=n.getFillColor(),a=e.getFillColor();if(!r||!a)return;const d=n.getPosition(),s=e.getPosition(),f=T(r,a,n.getRadius(),e.getRadius()),l=t.createLinearGradient(d.x,d.y,s.x,s.y);return l.addColorStop($,N(r,i)),l.addColorStop(E(o,$,L),q(f,i)),l.addColorStop(L,N(a,i)),l}function j(t,n,e,i,o){W(t,i,o),t.lineWidth=n,t.strokeStyle=e,t.stroke()}function J(t,n,e,i){const o=t.actualOptions,r=o.interactivity.modes.connect;if(r)return V(n,e,i,r.links.opacity)}function K(t,n,e){t.canvas.draw(i=>{const o=J(t,i,n,e);if(!o)return;const r=n.getPosition(),a=e.getPosition();j(i,n.retina.linksWidth??G,o,r,a)})}const Q="connect",S=0;class U extends A{constructor(n){super(n)}clear(){}init(){const n=this.container,e=n.actualOptions.interactivity.modes.connect;e&&(n.retina.connectModeDistance=e.distance*n.retina.pixelRatio,n.retina.connectModeRadius=e.radius*n.retina.pixelRatio)}interact(){const n=this.container;if(n.actualOptions.interactivity.events.onHover.enable&&n.interactivity.status==="pointermove"){const i=n.interactivity.mouse.position,{connectModeDistance:o,connectModeRadius:r}=n.retina;if(!o||o<S||!r||r<S||!i)return;const a=Math.abs(r),d=n.particles.quadTree.queryCircle(i,a,s=>this.isEnabled(s));d.forEach((s,f)=>{const l=s.getPosition(),x=1;for(const g of d.slice(f+x)){const m=g.getPosition(),c=Math.abs(o),h=Math.abs(l.x-m.x),u=Math.abs(l.y-m.y);h<c&&u<c&&K(n,s,g)}})}}isEnabled(n){const e=this.container,i=e.interactivity.mouse,o=((n==null?void 0:n.interactivity)??e.actualOptions.interactivity).events;return o.onHover.enable&&i.position?H(Q,o.onHover.mode):!1}loadModeOptions(n,...e){n.connect||(n.connect=new B);for(const i of e)n.connect.load(i==null?void 0:i.connect)}reset(){}}async function _(t,n=!0){t.checkVersion("3.8.1"),await t.addInteractor("externalConnect",e=>Promise.resolve(new U(e)),n)}export{B as Connect,z as ConnectLinks,_ as loadExternalConnectInteraction};
