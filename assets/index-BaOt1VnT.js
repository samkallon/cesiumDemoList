const H="pointermove",N="tsParticles - Error";const h={x:0,y:0,z:0},l=2,$=1,j=0;var q;(function(e){e.bottom="bottom",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.left="left",e.none="none",e.right="right",e.top="top",e.topLeft="top-left",e.topRight="top-right",e.outside="outside",e.inside="inside"})(q||(q={}));function G(e){return typeof e=="number"}function J(e){return Array.isArray(e)}function K(e){return e==null}class u{constructor(t,i,n){if(this._updateFromAngle=(s,a)=>{this.x=Math.cos(s)*a,this.y=Math.sin(s)*a},!G(t)&&t){this.x=t.x,this.y=t.y;const s=t;this.z=s.z?s.z:h.z}else if(t!==void 0&&i!==void 0)this.x=t,this.y=i,this.z=n??h.z;else throw new Error(`${N} Vector3d not initialized correctly`)}static get origin(){return u.create(h.x,h.y,h.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return u.create(t.x,t.y,t.z)}static create(t,i,n){return new u(t,i,n)}add(t){return u.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return u.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return u.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**l+this.y**l}mult(t){return u.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=j&&this.multTo($/t)}rotate(t){return u.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),h.z)}setTo(t){this.x=t.x,this.y=t.y;const i=t;this.z=i.z?i.z:h.z}sub(t){return u.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class p extends u{constructor(t,i){super(t,i,h.z)}static get origin(){return p.create(h.x,h.y)}static clone(t){return p.create(t.x,t.y)}static create(t,i){return new p(t,i)}}function U(e,t,i){return Math.min(Math.max(e,t),i)}function P(e,t){const i=e.x-t.x,n=e.y-t.y,s=2;return{dx:i,dy:n,distance:Math.sqrt(i**s+n**s)}}function W(e,t){return P(e,t).distance}var w;(function(e){e.auto="auto",e.increase="increase",e.decrease="decrease",e.random="random"})(w||(w={}));var O;(function(e){e.increasing="increasing",e.decreasing="decreasing"})(O||(O={}));var M;(function(e){e.none="none",e.max="max",e.min="min"})(M||(M={}));var S;(function(e){e.bottom="bottom",e.left="left",e.right="right",e.top="top"})(S||(S={}));var A;(function(e){e.precise="precise",e.percent="percent"})(A||(A={}));var Q;(function(e){e.max="max",e.min="min",e.random="random"})(Q||(Q={}));function z(e,t){return e===t||J(t)&&t.indexOf(e)>-1}var v;(function(e){e.external="external",e.particles="particles"})(v||(v={}));var f;(function(e){e.circle="circle",e.rectangle="rectangle"})(f||(f={}));class R{constructor(t,i,n){this.position={x:t,y:i},this.type=n}}class y extends R{constructor(t,i,n){super(t,i,f.circle),this.radius=n}contains(t){return W(t,this.position)<=this.radius}intersects(t){const i=this.position,n=t.position,s={x:Math.abs(n.x-i.x),y:Math.abs(n.y-i.y)},a=this.radius;if(t instanceof y||t.type===f.circle){const r=t,c=a+r.radius,o=Math.sqrt(s.x**l+s.y**l);return c>o}else if(t instanceof I||t.type===f.rectangle){const r=t,{width:c,height:o}=r.size;return Math.pow(s.x-c,l)+Math.pow(s.y-o,l)<=a**l||s.x<=a+c&&s.y<=a+o||s.x<=c||s.y<=o}return!1}}class I extends R{constructor(t,i,n,s){super(t,i,f.rectangle),this.size={height:s,width:n}}contains(t){const i=this.size.width,n=this.size.height,s=this.position;return t.x>=s.x&&t.x<=s.x+i&&t.y>=s.y&&t.y<=s.y+n}intersects(t){if(t instanceof y)return t.intersects(this);const i=this.size.width,n=this.size.height,s=this.position,a=t.position,r=t instanceof I?t.size:{width:0,height:0},c=r.width,o=r.height;return a.x<s.x+i&&a.x+c>s.x&&a.y<s.y+n&&a.y+o>s.y}}class X{constructor(t){this.type=v.external,this.container=t}}var g;(function(e){e.easeInBack="ease-in-back",e.easeInCirc="ease-in-circ",e.easeInCubic="ease-in-cubic",e.easeInLinear="ease-in-linear",e.easeInQuad="ease-in-quad",e.easeInQuart="ease-in-quart",e.easeInQuint="ease-in-quint",e.easeInExpo="ease-in-expo",e.easeInSine="ease-in-sine",e.easeOutBack="ease-out-back",e.easeOutCirc="ease-out-circ",e.easeOutCubic="ease-out-cubic",e.easeOutLinear="ease-out-linear",e.easeOutQuad="ease-out-quad",e.easeOutQuart="ease-out-quart",e.easeOutQuint="ease-out-quint",e.easeOutExpo="ease-out-expo",e.easeOutSine="ease-out-sine",e.easeInOutBack="ease-in-out-back",e.easeInOutCirc="ease-in-out-circ",e.easeInOutCubic="ease-in-out-cubic",e.easeInOutLinear="ease-in-out-linear",e.easeInOutQuad="ease-in-out-quad",e.easeInOutQuart="ease-in-out-quart",e.easeInOutQuint="ease-in-out-quint",e.easeInOutExpo="ease-in-out-expo",e.easeInOutSine="ease-in-out-sine"})(g||(g={}));const Y=1,Z=1,F=0;function L(e,t,i,n,s,a){const r=t.actualOptions.interactivity.modes.attract;if(!r)return;const c=t.particles.quadTree.query(s,a);for(const o of c){const{dx:d,dy:B,distance:x}=P(o.position,i),b=r.speed*r.factor,k=U(e.getEasing(r.easing)(Z-x/n)*b,Y,r.maxSpeed),C=p.create(x?d/x*k:b,x?B/x*k:b);o.position.subFrom(C)}}function D(e,t,i){t.attract||(t.attract={particles:[]});const{attract:n}=t;if(n.finish||(n.count||(n.count=0),n.count++,n.count===t.particles.count&&(n.finish=!0)),n.clicking){const s=t.interactivity.mouse.clickPosition,a=t.retina.attractModeDistance;if(!a||a<F||!s)return;L(e,t,s,a,new y(s.x,s.y,a),r=>i(r))}else n.clicking===!1&&(n.particles=[])}function V(e,t,i){const n=t.interactivity.mouse.position,s=t.retina.attractModeDistance;!s||s<F||!n||L(e,t,n,s,new y(n.x,n.y,s),a=>i(a))}class E{constructor(){this.distance=200,this.duration=.4,this.easing=g.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(t){K(t)||(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}const m="attract";class _ extends X{constructor(t,i){super(i),this._engine=t,i.attract||(i.attract={particles:[]}),this.handleClickMode=n=>{const s=this.container.actualOptions,a=s.interactivity.modes.attract;if(!(!a||n!==m)){i.attract||(i.attract={particles:[]}),i.attract.clicking=!0,i.attract.count=0;for(const r of i.attract.particles)this.isEnabled(r)&&r.velocity.setTo(r.initialVelocity);i.attract.particles=[],i.attract.finish=!1,setTimeout(()=>{i.destroyed||(i.attract||(i.attract={particles:[]}),i.attract.clicking=!1)},a.duration*1e3)}}}clear(){}init(){const t=this.container,i=t.actualOptions.interactivity.modes.attract;i&&(t.retina.attractModeDistance=i.distance*t.retina.pixelRatio)}interact(){const t=this.container,i=t.actualOptions,n=t.interactivity.status===H,s=i.interactivity.events,{enable:a,mode:r}=s.onHover,{enable:c,mode:o}=s.onClick;n&&a&&z(m,r)?V(this._engine,this.container,d=>this.isEnabled(d)):c&&z(m,o)&&D(this._engine,this.container,d=>this.isEnabled(d))}isEnabled(t){const i=this.container,n=i.actualOptions,s=i.interactivity.mouse,a=((t==null?void 0:t.interactivity)??n.interactivity).events;if((!s.position||!a.onHover.enable)&&(!s.clickPosition||!a.onClick.enable))return!1;const r=a.onHover.mode,c=a.onClick.mode;return z(m,r)||z(m,c)}loadModeOptions(t,...i){t.attract||(t.attract=new E);for(const n of i)t.attract.load(n==null?void 0:n.attract)}reset(){}}async function T(e,t=!0){e.checkVersion("3.8.1"),await e.addInteractor("externalAttract",i=>Promise.resolve(new _(e,i)),t)}export{E as Attract,T as loadExternalAttractInteraction};
