import{s as x}from"./smoke-B3Ez2l2u.js";import{i as w}from"./dat.gui.module-CdQtWzq-.js";import{S as f}from"./index-DqJpl1j7.js";import{_ as y,o as v,c as M,a as z,b as R}from"./index-Cz_mX-Ds.js";const _={class:"container"},k={__name:"Fountain",setup(T){let t=null;return v(async()=>{const r=new f.samCzm({Cesium});r.initViewer({id:"cesiumContainer",initCamera:!1,viewerOptions:{timeline:!0,animation:!0}}),t=r.viewer,t.scene.globe.depthTestAgainstTerrain=!0,t.camera.setView({destination:{x:-260609619197039e-8,y:4741283044767857e-9,z:3366846300314784e-9},orientation:{heading:6.030628225197559,pitch:-.32690567198428333,roll:6.283185016029345}}),Cesium.Math.setRandomNumberSeed(3);const s=Cesium.JulianDate.fromDate(new Date(2015,2,25,16)),d=Cesium.JulianDate.addSeconds(s,120,new Cesium.JulianDate);t.clock.startTime=s.clone(),t.clock.stopTime=d.clone(),t.clock.currentTime=s.clone(),t.clock.clockRange=Cesium.ClockRange.LOOP_STOP,t.clock.multiplier=1,t.clock.shouldAnimate=!0;const i={emissionRate:485,gravity:-43,minimumSpeed:70,maximumSpeed:90,startScale:1,endScale:30,particleSize:6},p=new Cesium.Matrix4,C=new Cesium.Cartesian3,S=new Cesium.Quaternion;let l=new Cesium.HeadingPitchRoll;const c=new Cesium.TranslationRotationScale;function u(){return l=Cesium.HeadingPitchRoll.fromDegrees(0,Cesium.Math.toRadians(90),0,l),c.translation=Cesium.Cartesian3.fromElements(-4,0,1.4,C),c.rotation=Cesium.Quaternion.fromHeadingPitchRoll(l,S),Cesium.Matrix4.fromTranslationRotationScale(c,p)}const a=t.scene.primitives.add(new Cesium.ParticleSystem({image:x,startColor:Cesium.Color.LIGHTSEAGREEN.withAlpha(.7),endColor:Cesium.Color.WHITE.withAlpha(0),startScale:i.startScale,endScale:i.endScale,minimumSpeed:i.minimumSpeed,maximumSpeed:i.maximumSpeed,imageSize:new Cesium.Cartesian2(i.particleSize,i.particleSize),emissionRate:i.emissionRate,lifetime:.2,sizelnMeters:!1,emitter:new Cesium.ConeEmitter(Cesium.Math.toRadians(30)),emitterModelMatrix:u(),updateCallback:g})),m=new Cesium.Cartesian3;function g(e,o){const h=e.position;Cesium.Cartesian3.normalize(h,m),Cesium.Cartesian3.multiplyByScalar(m,i.gravity*o,m),e.velocity=Cesium.Cartesian3.add(e.velocity,m,e.velocity)}t.scene.preUpdate.addEventListener(function(e,o){a.modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame({x:-2.6057339141162727e6,y:4740914227929786e-9,z:3.3672094464677833e6}),a.emitterModelMatrix=u()});const n=new w.GUI;n.domElement.style="position:absolute;top:10px;left:10px;",document.querySelector(".container").appendChild(n.domElement),n.add(i,"emissionRate",0,2e3).onChange(e=>{a.emissionRate=parseFloat(e)}),n.add(i,"particleSize",0,60).onChange(e=>{const o=parseFloat(e);a.minimumImageSize.x=o,a.minimumImageSize.y=o,a.maximumImageSize.x=o,a.maximumImageSize.y=o}),n.add(i,"gravity",-100,100).onChange(e=>{}),n.add(i,"minimumSpeed",0,300).onChange(e=>{a.minimumSpeed=parseFloat(e)}),n.add(i,"maximumSpeed",0,300).onChange(e=>{a.maximumSpeed=parseFloat(e)}),n.add(i,"startScale",0,10).onChange(e=>{a.startScale=parseFloat(e)}),n.add(i,"endScale",0,50).onChange(e=>{a.endScale=parseFloat(e)})}),(r,s)=>(R(),M("div",_,s[0]||(s[0]=[z("div",{id:"cesiumContainer"},null,-1)])))}},b=y(k,[["__scopeId","data-v-f278913e"]]);export{b as default};
