var Y;(function(i){i.bottom="bottom",i.bottomLeft="bottom-left",i.bottomRight="bottom-right",i.left="left",i.none="none",i.right="right",i.top="top",i.topLeft="top-left",i.topRight="top-right",i.outside="outside",i.inside="inside"})(Y||(Y={}));function L(i){return typeof i=="string"}function $(i){return typeof i=="number"}function U(i){return Array.isArray(i)}function S(i){return i==null}let wn=Math.random;function V(){return bn(wn(),0,1-Number.EPSILON)}function bn(i,n,t){return Math.min(Math.max(i,n),t)}function j(i,n,t,e){return Math.floor((i*t+n*e)/(t+e))}function N(i){const n=dn(i),t=0;let e=hn(i);return n===e&&(e=t),V()*(n-e)+e}function Mn(i){return $(i)?i:N(i)}function hn(i){return $(i)?i:i.min}function dn(i){return $(i)?i:i.max}function I(i,n){if(i===n||n===void 0&&$(i))return i;const t=hn(i),e=dn(i);return n!==void 0?{min:Math.min(t,n),max:Math.max(e,n)}:I(t,e)}function T(i,n){const t=i.x-n.x,e=i.y-n.y,s=2;return{dx:t,dy:e,distance:Math.sqrt(t**s+e**s)}}function z(i,n){return T(i,n).distance}var Z;(function(i){i.auto="auto",i.increase="increase",i.decrease="decrease",i.random="random"})(Z||(Z={}));var nn;(function(i){i.increasing="increasing",i.decreasing="decreasing"})(nn||(nn={}));var tn;(function(i){i.none="none",i.max="max",i.min="min"})(tn||(tn={}));var en;(function(i){i.bottom="bottom",i.left="left",i.right="right",i.top="top"})(en||(en={}));var sn;(function(i){i.precise="precise",i.percent="percent"})(sn||(sn={}));var rn;(function(i){i.max="max",i.min="min",i.random="random"})(rn||(rn={}));function Cn(i){return Math.floor(V()*i.length)}function gn(i,n,t=!0){return i[Cn(i)]}function qn(i,n){if(i.version!==n)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${i.version}. Plugins version: ${n}`)}var on;(function(i){i.darken="darken",i.enlighten="enlighten"})(on||(on={}));const E="random",W="mid";function vn(i,n){if(n){for(const t of i.colorManagers.values())if(n.startsWith(t.stringPrefix))return t.parseString(n)}}function _(i,n,t,e=!0){if(!n)return;const s=L(n)?{value:n}:n;if(L(s.value))return yn(i,s.value,t,e);if(U(s.value))return _(i,{value:gn(s.value,t,e)});for(const r of i.colorManagers.values()){const o=r.handleRangeColor(s);if(o)return o}}function yn(i,n,t,e=!0){if(!n)return;const s=L(n)?{value:n}:n;if(L(s.value))return s.value===E?xn():Ln(i,s.value);if(U(s.value))return yn(i,{value:gn(s.value,t,e)});for(const r of i.colorManagers.values()){const o=r.handleColor(s);if(o)return o}}function Ln(i,n){return vn(i,n)}function H(i){const o=(i.h%360+360)%360,a=Math.max(0,Math.min(100,i.s)),l=Math.max(0,Math.min(100,i.l)),d=o/360,x=a/100,f=l/100,u=255,h=3;if(a===0){const b=Math.round(f*u);return{r:b,g:b,b}}const c=.5,g=2,k=(b,B,M)=>{if(M<0&&M++,M>1&&M--,M*6<1)return b+(B-b)*6*M;if(M*g<1)return B;if(M*h<1*g){const mn=g/h;return b+(B-b)*(mn-M)*6}return b},w=1,y=f<c?f*(w+x):f+x-f*x,p=g*f-y,C=1,m=C/h,F=Math.min(u,u*k(p,y,d+m)),X=Math.min(u,u*k(p,y,d)),pn=Math.min(u,u*k(p,y,d-m));return{r:Math.round(F),g:Math.round(X),b:Math.round(pn)}}function xn(i){return{b:Math.floor(N(I(0,256))),g:Math.floor(N(I(0,256))),r:Math.floor(N(I(0,256)))}}function J(i,n){return`rgba(${i.r}, ${i.g}, ${i.b}, ${n??1})`}function _n(i,n,t,e){let s=i,r=n;return s.r===void 0&&(s=H(i)),r.r===void 0&&(r=H(n)),{b:j(s.b,r.b,t,e),g:j(s.g,r.g,t,e),r:j(s.r,r.r,t,e)}}function an(i,n,t){if(t===E)return xn();if(t===W){const e=i.getFillColor()??i.getStrokeColor(),s=(n==null?void 0:n.getFillColor())??(n==null?void 0:n.getStrokeColor());if(e&&s&&n)return _n(e,s,i.getRadius(),n.getRadius());{const r=e??s;if(r)return H(r)}}else return t}function Pn(i,n,t,e){const s=L(n)?n:n.value;return s===E?e?_(i,{value:s}):t?E:W:s===W?W:_(i,{value:s})}function A(i,n,t){i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(t.x,t.y),i.closePath()}class q{constructor(){this.value=""}static create(n,t){const e=new q;return e.load(n),t!==void 0&&(L(t)||U(t)?e.load({value:t}):e.load(t)),e}load(n){S(n)||S(n.value)||(this.value=n.value)}}var Q;(function(i){i.external="external",i.particles="particles"})(Q||(Q={}));var v;(function(i){i.circle="circle",i.rectangle="rectangle"})(v||(v={}));const R=2;class kn{constructor(n,t,e){this.position={x:n,y:t},this.type=e}}class P extends kn{constructor(n,t,e){super(n,t,v.circle),this.radius=e}contains(n){return z(n,this.position)<=this.radius}intersects(n){const t=this.position,e=n.position,s={x:Math.abs(e.x-t.x),y:Math.abs(e.y-t.y)},r=this.radius;if(n instanceof P||n.type===v.circle){const o=n,a=r+o.radius,l=Math.sqrt(s.x**R+s.y**R);return a>l}else if(n instanceof D||n.type===v.rectangle){const o=n,{width:a,height:l}=o.size;return Math.pow(s.x-a,R)+Math.pow(s.y-l,R)<=r**R||s.x<=r+a&&s.y<=r+l||s.x<=a||s.y<=l}return!1}}class D extends kn{constructor(n,t,e,s){super(n,t,v.rectangle),this.size={height:s,width:e}}contains(n){const t=this.size.width,e=this.size.height,s=this.position;return n.x>=s.x&&n.x<=s.x+t&&n.y>=s.y&&n.y<=s.y+e}intersects(n){if(n instanceof P)return n.intersects(this);const t=this.size.width,e=this.size.height,s=this.position,r=n.position,o=n instanceof D?n.size:{width:0,height:0},a=o.width,l=o.height;return r.x<s.x+t&&r.x+a>s.x&&r.y<s.y+e&&r.y+l>s.y}}class Rn{constructor(n){this.type=Q.particles,this.container=n}}const K=2;class Tn extends P{constructor(n,t,e,s){super(n,t,e),this.canvasSize=s,this.canvasSize={...s}}contains(n){const{width:t,height:e}=this.canvasSize,{x:s,y:r}=n;return super.contains(n)||super.contains({x:s-t,y:r})||super.contains({x:s-t,y:r-e})||super.contains({x:s,y:r-e})}intersects(n){if(super.intersects(n))return!0;const t=n,e=n,s={x:n.position.x-this.canvasSize.width,y:n.position.y-this.canvasSize.height};if(e.radius!==void 0){const r=new P(s.x,s.y,e.radius*K);return super.intersects(r)}else if(t.size!==void 0){const r=new D(s.x,s.y,t.size.width*K,t.size.height*K);return super.intersects(r)}return!1}}class zn{constructor(){this.blur=5,this.color=new q,this.color.value="#000",this.enable=!1}load(n){S(n)||(n.blur!==void 0&&(this.blur=n.blur),this.color=q.create(this.color,n.color),n.enable!==void 0&&(this.enable=n.enable))}}class Sn{constructor(){this.enable=!1,this.frequency=1}load(n){S(n)||(n.color!==void 0&&(this.color=q.create(this.color,n.color)),n.enable!==void 0&&(this.enable=n.enable),n.frequency!==void 0&&(this.frequency=n.frequency),n.opacity!==void 0&&(this.opacity=n.opacity))}}class Fn{constructor(){this.blink=!1,this.color=new q,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new zn,this.triangles=new Sn,this.width=1,this.warp=!1}load(n){S(n)||(n.id!==void 0&&(this.id=n.id),n.blink!==void 0&&(this.blink=n.blink),this.color=q.create(this.color,n.color),n.consent!==void 0&&(this.consent=n.consent),n.distance!==void 0&&(this.distance=n.distance),n.enable!==void 0&&(this.enable=n.enable),n.frequency!==void 0&&(this.frequency=n.frequency),n.opacity!==void 0&&(this.opacity=n.opacity),this.shadow.load(n.shadow),this.triangles.load(n.triangles),n.width!==void 0&&(this.width=n.width),n.warp!==void 0&&(this.warp=n.warp))}}const ln=2,On=1,O={x:0,y:0},Nn=0;function In(i,n,t,e,s){const{dx:r,dy:o,distance:a}=T(i,n);if(!s||a<=t)return a;const l={x:Math.abs(r),y:Math.abs(o)},d={x:Math.min(l.x,e.width-l.x),y:Math.min(l.y,e.height-l.y)};return Math.sqrt(d.x**ln+d.y**ln)}class Wn extends Rn{constructor(n,t){super(n),this._setColor=e=>{if(!e.options.links)return;const s=this._linkContainer,r=e.options.links;let o=r.id===void 0?s.particles.linksColor:s.particles.linksColors.get(r.id);if(o)return;const a=r.color;o=Pn(this._engine,a,r.blink,r.consent),r.id===void 0?s.particles.linksColor=o:s.particles.linksColors.set(r.id,o)},this._linkContainer=n,this._engine=t}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(n){if(!n.options.links)return;n.links=[];const t=n.getPosition(),e=this.container,s=e.canvas.size;if(t.x<O.x||t.y<O.y||t.x>s.width||t.y>s.height)return;const r=n.options.links,o=r.opacity,a=n.retina.linksDistance??Nn,l=r.warp;let d;l?d=new Tn(t.x,t.y,a,s):d=new P(t.x,t.y,a);const x=e.particles.quadTree.query(d);for(const f of x){const u=f.options.links;if(n===f||!(u!=null&&u.enable)||r.id!==u.id||f.spawning||f.destroyed||!f.links||n.links.some(k=>k.destination===f)||f.links.some(k=>k.destination===n))continue;const h=f.getPosition();if(h.x<O.x||h.y<O.y||h.x>s.width||h.y>s.height)continue;const c=In(t,h,a,s,l&&u.warp);if(c>a)continue;const g=(On-c/a)*o;this._setColor(n),n.links.push({destination:f,opacity:g})}}isEnabled(n){var t;return!!((t=n.options.links)!=null&&t.enable)}loadParticlesOptions(n,...t){n.links||(n.links=new Fn);for(const e of t)n.links.load(e==null?void 0:e.links)}reset(){}}async function En(i,n=!0){await i.addInteractor("particlesLinks",async t=>Promise.resolve(new Wn(t,i)),n)}function $n(i,n,t,e){i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(t.x,t.y),i.lineTo(e.x,e.y),i.closePath()}function Vn(i){let n=!1;const{begin:t,end:e,engine:s,maxDistance:r,context:o,canvasSize:a,width:l,backgroundMask:d,colorLine:x,opacity:f,links:u}=i;if(z(t,e)<=r)A(o,t,e),n=!0;else if(u.warp){let c,g;const k={x:e.x-a.width,y:e.y},w=T(t,k);if(w.distance<=r){const y=t.y-w.dy/w.dx*t.x;c={x:0,y},g={x:a.width,y}}else{const y={x:e.x,y:e.y-a.height},p=T(t,y);if(p.distance<=r){const m=-(t.y-p.dy/p.dx*t.x)/(p.dy/p.dx);c={x:m,y:0},g={x:m,y:a.height}}else{const C={x:e.x-a.width,y:e.y-a.height},m=T(t,C);if(m.distance<=r){const F=t.y-m.dy/m.dx*t.x;c={x:-F/(m.dy/m.dx),y:F},g={x:c.x+a.width,y:c.y+a.height}}}}c&&g&&(A(o,t,c),A(o,e,g),n=!0)}if(!n)return;o.lineWidth=l,d.enable&&(o.globalCompositeOperation=d.composite),o.strokeStyle=J(x,f);const{shadow:h}=u;if(h.enable){const c=_(s,h.color);c&&(o.shadowBlur=h.blur,o.shadowColor=J(c))}o.stroke()}function Dn(i){const{context:n,pos1:t,pos2:e,pos3:s,backgroundMask:r,colorTriangle:o,opacityTriangle:a}=i;$n(n,t,e,s),r.enable&&(n.globalCompositeOperation=r.composite),n.fillStyle=J(o,a),n.fill()}function Bn(i){return i.sort((n,t)=>n-t),i.join("_")}function cn(i,n){const t=Bn(i.map(s=>s.id));let e=n.get(t);return e===void 0&&(e=V(),n.set(t,e)),e}const un=0,G=0,fn=0,jn=.5,An=1;class Kn{constructor(n,t){this._drawLinkLine=(e,s)=>{const r=e.options.links;if(!(r!=null&&r.enable))return;const o=this._container,a=o.actualOptions,l=s.destination,d=e.getPosition(),x=l.getPosition();let f=s.opacity;o.canvas.draw(u=>{var y;let h;const c=(y=e.options.twinkle)==null?void 0:y.lines;if(c!=null&&c.enable){const p=c.frequency,C=_(this._engine,c.color);V()<p&&C&&(h=C,f=Mn(c.opacity))}if(!h){const p=r.id!==void 0?o.particles.linksColors.get(r.id):o.particles.linksColor;h=an(e,l,p)}if(!h)return;const g=e.retina.linksWidth??G,k=e.retina.linksDistance??fn,{backgroundMask:w}=a;Vn({context:u,width:g,begin:d,end:x,engine:this._engine,maxDistance:k,canvasSize:o.canvas.size,links:r,backgroundMask:w,colorLine:h,opacity:f})})},this._drawLinkTriangle=(e,s,r)=>{const o=e.options.links;if(!(o!=null&&o.enable))return;const a=o.triangles;if(!a.enable)return;const l=this._container,d=l.actualOptions,x=s.destination,f=r.destination,u=a.opacity??(s.opacity+r.opacity)*jn;u<=un||l.canvas.draw(h=>{const c=e.getPosition(),g=x.getPosition(),k=f.getPosition(),w=e.retina.linksDistance??fn;if(z(c,g)>w||z(k,g)>w||z(k,c)>w)return;let y=_(this._engine,a.color);if(!y){const p=o.id!==void 0?l.particles.linksColors.get(o.id):l.particles.linksColor;y=an(e,x,p)}y&&Dn({context:h,pos1:c,pos2:g,pos3:k,backgroundMask:d.backgroundMask,colorTriangle:y,opacityTriangle:u})})},this._drawTriangles=(e,s,r,o)=>{var d,x,f;const a=r.destination;if(!((d=e.links)!=null&&d.triangles.enable&&((x=a.options.links)!=null&&x.triangles.enable)))return;const l=(f=a.links)==null?void 0:f.filter(u=>{const h=this._getLinkFrequency(a,u.destination);return a.options.links&&h<=a.options.links.frequency&&o.findIndex(g=>g.destination===u.destination)>=0});if(l!=null&&l.length)for(const u of l){const h=u.destination;this._getTriangleFrequency(s,a,h)>e.links.triangles.frequency||this._drawLinkTriangle(s,r,u)}},this._getLinkFrequency=(e,s)=>cn([e,s],this._freqs.links),this._getTriangleFrequency=(e,s,r)=>cn([e,s,r],this._freqs.triangles),this._container=n,this._engine=t,this._freqs={links:new Map,triangles:new Map}}drawParticle(n,t){const{links:e,options:s}=t;if(!(e!=null&&e.length))return;const r=e.filter(o=>s.links&&(s.links.frequency>=An||this._getLinkFrequency(t,o.destination)<=s.links.frequency));for(const o of r)this._drawTriangles(s,t,o,r),o.opacity>un&&(t.retina.linksWidth??G)>G&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(n){if(n.links=[],!n.options.links)return;const t=this._container.retina.pixelRatio,{retina:e}=n,{distance:s,width:r}=n.options.links;e.linksDistance=s*t,e.linksWidth=r*t}particleDestroyed(n){n.links=[]}}class Gn{constructor(n){this.id="links",this._engine=n}getPlugin(n){return Promise.resolve(new Kn(n,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function Hn(i,n=!0){const t=new Gn(i);await i.addPlugin(t,n)}async function Xn(i,n=!0){qn(i,"3.7.1"),await En(i,n),await Hn(i,n)}export{Fn as Links,zn as LinksShadow,Sn as LinksTriangle,Xn as loadParticlesLinksInteraction};
